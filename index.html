<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Palacio Skins Scorecard</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 2rem auto;
      max-width: 720px;
      padding: 0 1rem;
    }
    h1, h3 {
      font-weight: 600;
    }
    label {
      display: block;
      margin-top: 1rem;
    }
    select, input[type="number"] {
      width: 100%;
      max-width: 300px;
      padding: 0.5rem;
      margin-top: 0.3rem;
    }
    input[type="radio"], input[type="checkbox"] {
      margin-right: 0.5rem;
    }
    button {
      margin-top: 1rem;
      padding: 0.6rem 1rem;
      font-size: 1rem;
      background: #0366d6;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background: #024fa0;
    }
    table {
      width: 100%;
      margin-top: 1rem;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.6rem;
      text-align: center;
    }
    th {
      background: #f0f0f0;
    }
    #admin-results {
      white-space: pre-wrap;
      background: #f9f9f9;
      padding: 1rem;
      border: 1px solid #ccc;
      margin-top: 1.5rem;
    }
  </style>
</head>
<body>

<h1>Palacio Skins Scorecard</h1>

<form id="score-form">
  <label for="player">Player:</label>
  <select id="player" required>
    <option value="" disabled selected>Select a player</option>
  </select>

  <label for="week-number">Week Number:</label>
  <input type="number" id="week-number" required min="1" />

  <h3 id="hole-label">Hole 1</h3>
  <div id="score-options">
    <label><input type="radio" name="score" value="1"> Hole-in-One</label>
    <label><input type="radio" name="score" value="2"> Birdie</label>
    <label><input type="radio" name="score" value="2*"> Chip-in Birdie</label>
    <label><input type="radio" name="score" value="3+" checked> Par or Worse</label>
  </div>

  <div id="ctp-container" style="display: none;">
    <label><input type="checkbox" id="ctp"> Closest to Pin (CTP)</label>
  </div>

  <button type="submit">Submit Hole</button>
</form>

<div id="result-message"></div>

<div id="scorecard">
  <h3>Player Scorecard</h3>
  <table>
    <thead>
      <tr><th>Hole</th><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td></tr>
    </thead>
    <tbody>
      <tr id="scorecard-row">
        <th>Score</th>
        <td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td>
      </tr>
    </tbody>
  </table>
</div>

<div id="admin-tools" style="display:none;">
  <h3>Admin Tools</h3>
  <label for="admin-week">Week to Finalize:</label>
  <input type="number" id="admin-week" value="1" min="1" />
  <button id="calculate-payouts">ðŸ’° Finalize Scores & Calculate Payouts</button>
  <button id="clear-week" style="background:#e00; color:white;">ðŸ—‘ Clear Week</button>
  <pre id="admin-results"></pre>
</div>

<div id="live-summary"></div>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

const supabase = createClient(
  'https://htsipaxeqaumxntsrsvx.supabase.co',
  'YOUR_SUPABASE_PUBLIC_ANON_KEY'
);

document.addEventListener('DOMContentLoaded', () => {
  const playerSelect = document.getElementById('player');
  const players = ["Commish", "Craig Sanger", "Alex Kim", "Alex Mattfolk", "Beau Schmitt", "Brett Heater", "Buzz Gibbs", "Chris Burman", "Curtis Strand", "Dan Gilliam", "Daniel Nunez", "Elijah Peterson", "Eric Ingersoll", "Erik Allison", "Gavin Lodge", "Gary Dilworth", "Jared Sanderson", "Jay Nakamura", "Jeff Jordan", "Jermell Mitchell", "Jim Giubilato", "Jory Adam", "Mark Gresser", "Mike Hurvitz", "Neil Gerber", "Roman Alper", "Ryan Haight", "Sean Edwards", "Steve Bonner", "Steve Jess"];
  players.forEach
